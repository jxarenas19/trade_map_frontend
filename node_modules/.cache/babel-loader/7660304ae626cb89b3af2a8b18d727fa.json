{"remainingRequest":"D:\\TRABAJO\\Proyectos\\Fullstackgroup\\Vuejs\\node_modules\\babel-loader\\lib\\index.js!D:\\TRABAJO\\Proyectos\\Fullstackgroup\\Vuejs\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\TRABAJO\\Proyectos\\Fullstackgroup\\Vuejs\\src\\state\\modules\\auth.js","dependencies":[{"path":"D:\\TRABAJO\\Proyectos\\Fullstackgroup\\Vuejs\\src\\state\\modules\\auth.js","mtime":1590499896000},{"path":"D:\\TRABAJO\\Proyectos\\Fullstackgroup\\Vuejs\\babel.config.js","mtime":1590418726000},{"path":"D:\\TRABAJO\\Proyectos\\Fullstackgroup\\Vuejs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1676246665630},{"path":"D:\\TRABAJO\\Proyectos\\Fullstackgroup\\Vuejs\\node_modules\\babel-loader\\lib\\index.js","mtime":1676246672412},{"path":"D:\\TRABAJO\\Proyectos\\Fullstackgroup\\Vuejs\\node_modules\\eslint-loader\\index.js","mtime":1676246667568}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZ2V0RmlyZWJhc2VCYWNrZW5kIH0gZnJvbSAnLi4vLi4vaGVscGVycy9maXJlYmFzZS9hdXRoVXRpbHMnOwpleHBvcnQgY29uc3Qgc3RhdGUgPSB7CiAgY3VycmVudFVzZXI6IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2F1dGhVc2VyJykKfTsKZXhwb3J0IGNvbnN0IG11dGF0aW9ucyA9IHsKICBTRVRfQ1VSUkVOVF9VU0VSKHN0YXRlLCBuZXdWYWx1ZSkgewogICAgc3RhdGUuY3VycmVudFVzZXIgPSBuZXdWYWx1ZTsKICAgIHNhdmVTdGF0ZSgnYXV0aC5jdXJyZW50VXNlcicsIG5ld1ZhbHVlKTsKICB9Cn07CmV4cG9ydCBjb25zdCBnZXR0ZXJzID0gewogIC8vIFdoZXRoZXIgdGhlIHVzZXIgaXMgY3VycmVudGx5IGxvZ2dlZCBpbi4KICBsb2dnZWRJbihzdGF0ZSkgewogICAgcmV0dXJuICEhc3RhdGUuY3VycmVudFVzZXI7CiAgfQp9OwpleHBvcnQgY29uc3QgYWN0aW9ucyA9IHsKICAvLyBUaGlzIGlzIGF1dG9tYXRpY2FsbHkgcnVuIGluIGBzcmMvc3RhdGUvc3RvcmUuanNgIHdoZW4gdGhlIGFwcAogIC8vIHN0YXJ0cywgYWxvbmcgd2l0aCBhbnkgb3RoZXIgYWN0aW9ucyBuYW1lZCBgaW5pdGAgaW4gb3RoZXIgbW9kdWxlcy4KICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKICBpbml0KHsKICAgIHN0YXRlLAogICAgZGlzcGF0Y2gKICB9KSB7CiAgICBkaXNwYXRjaCgndmFsaWRhdGUnKTsKICB9LAogIC8vIExvZ3MgaW4gdGhlIGN1cnJlbnQgdXNlci4KICBsb2dJbih7CiAgICBjb21taXQsCiAgICBkaXNwYXRjaCwKICAgIGdldHRlcnMKICB9LCB7CiAgICBlbWFpbCwKICAgIHBhc3N3b3JkCiAgfSA9IHt9KSB7CiAgICBpZiAoZ2V0dGVycy5sb2dnZWRJbikgcmV0dXJuIGRpc3BhdGNoKCd2YWxpZGF0ZScpOwogICAgcmV0dXJuIGdldEZpcmViYXNlQmFja2VuZCgpLmxvZ2luVXNlcihlbWFpbCwgcGFzc3dvcmQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICBjb25zdCB1c2VyID0gcmVzcG9uc2U7CiAgICAgIGNvbW1pdCgnU0VUX0NVUlJFTlRfVVNFUicsIHVzZXIpOwogICAgICByZXR1cm4gdXNlcjsKICAgIH0pOwogIH0sCiAgLy8gTG9ncyBvdXQgdGhlIGN1cnJlbnQgdXNlci4KICBsb2dPdXQoewogICAgY29tbWl0CiAgfSkgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICBjb21taXQoJ1NFVF9DVVJSRU5UX1VTRVInLCBudWxsKTsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogICAgICBnZXRGaXJlYmFzZUJhY2tlbmQoKS5sb2dvdXQoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgcmVqZWN0KHRoaXMuX2hhbmRsZUVycm9yKGVycm9yKSk7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyByZWdpc3RlciB0aGUgdXNlcgogIHJlZ2lzdGVyKHsKICAgIGNvbW1pdCwKICAgIGRpc3BhdGNoLAogICAgZ2V0dGVycwogIH0sIHsKICAgIGVtYWlsLAogICAgcGFzc3dvcmQKICB9ID0ge30pIHsKICAgIGlmIChnZXR0ZXJzLmxvZ2dlZEluKSByZXR1cm4gZGlzcGF0Y2goJ3ZhbGlkYXRlJyk7CiAgICByZXR1cm4gZ2V0RmlyZWJhc2VCYWNrZW5kKCkucmVnaXN0ZXJVc2VyKGVtYWlsLCBwYXNzd29yZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIGNvbnN0IHVzZXIgPSByZXNwb25zZTsKICAgICAgY29tbWl0KCdTRVRfQ1VSUkVOVF9VU0VSJywgdXNlcik7CiAgICAgIHJldHVybiB1c2VyOwogICAgfSk7CiAgfSwKICAvLyByZWdpc3RlciB0aGUgdXNlcgogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogIHJlc2V0UGFzc3dvcmQoewogICAgY29tbWl0LAogICAgZGlzcGF0Y2gsCiAgICBnZXR0ZXJzCiAgfSwgewogICAgZW1haWwKICB9ID0ge30pIHsKICAgIGlmIChnZXR0ZXJzLmxvZ2dlZEluKSByZXR1cm4gZGlzcGF0Y2goJ3ZhbGlkYXRlJyk7CiAgICByZXR1cm4gZ2V0RmlyZWJhc2VCYWNrZW5kKCkuZm9yZ2V0UGFzc3dvcmQoZW1haWwpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICBjb25zdCBtZXNzYWdlID0gcmVzcG9uc2UuZGF0YTsKICAgICAgcmV0dXJuIG1lc3NhZ2U7CiAgICB9KTsKICB9LAogIC8vIFZhbGlkYXRlcyB0aGUgY3VycmVudCB1c2VyJ3MgdG9rZW4gYW5kIHJlZnJlc2hlcyBpdAogIC8vIHdpdGggbmV3IGRhdGEgZnJvbSB0aGUgQVBJLgogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogIHZhbGlkYXRlKHsKICAgIGNvbW1pdCwKICAgIHN0YXRlCiAgfSkgewogICAgaWYgKCFzdGF0ZS5jdXJyZW50VXNlcikgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTsKICAgIGNvbnN0IHVzZXIgPSBnZXRGaXJlYmFzZUJhY2tlbmQoKS5nZXRBdXRoZW50aWNhdGVkVXNlcigpOwogICAgY29tbWl0KCdTRVRfQ1VSUkVOVF9VU0VSJywgdXNlcik7CiAgICByZXR1cm4gdXNlcjsKICB9Cn07CgovLyA9PT0KLy8gUHJpdmF0ZSBoZWxwZXJzCi8vID09PQoKZnVuY3Rpb24gc2F2ZVN0YXRlKGtleSwgc3RhdGUpIHsKICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShzdGF0ZSkpOwp9"},{"version":3,"names":["getFirebaseBackend","state","currentUser","sessionStorage","getItem","mutations","SET_CURRENT_USER","newValue","saveState","getters","loggedIn","actions","init","dispatch","logIn","commit","email","password","loginUser","then","response","user","logOut","Promise","resolve","reject","logout","catch","error","_handleError","register","registerUser","resetPassword","forgetPassword","message","data","validate","getAuthenticatedUser","key","window","localStorage","setItem","JSON","stringify"],"sources":["D:/TRABAJO/Proyectos/Fullstackgroup/Vuejs/src/state/modules/auth.js"],"sourcesContent":["import { getFirebaseBackend } from '../../helpers/firebase/authUtils'\r\n\r\nexport const state = {\r\n    currentUser: sessionStorage.getItem('authUser'),\r\n}\r\n\r\nexport const mutations = {\r\n    SET_CURRENT_USER(state, newValue) {\r\n        state.currentUser = newValue\r\n        saveState('auth.currentUser', newValue)\r\n    },\r\n}\r\n\r\nexport const getters = {\r\n    // Whether the user is currently logged in.\r\n    loggedIn(state) {\r\n        return !!state.currentUser\r\n    },\r\n}\r\n\r\nexport const actions = {\r\n    // This is automatically run in `src/state/store.js` when the app\r\n    // starts, along with any other actions named `init` in other modules.\r\n    // eslint-disable-next-line no-unused-vars\r\n    init({ state, dispatch }) {\r\n        dispatch('validate')\r\n    },\r\n\r\n    // Logs in the current user.\r\n    logIn({ commit, dispatch, getters }, { email, password } = {}) {\r\n        if (getters.loggedIn) return dispatch('validate')\r\n\r\n        return getFirebaseBackend().loginUser(email, password).then((response) => {\r\n            const user = response\r\n            commit('SET_CURRENT_USER', user)\r\n            return user\r\n        });\r\n    },\r\n\r\n    // Logs out the current user.\r\n    logOut({ commit }) {\r\n        // eslint-disable-next-line no-unused-vars\r\n        commit('SET_CURRENT_USER', null)\r\n        return new Promise((resolve, reject) => {\r\n            // eslint-disable-next-line no-unused-vars\r\n            getFirebaseBackend().logout().then((response) => {\r\n                resolve(true);\r\n            }).catch((error) => {\r\n                reject(this._handleError(error));\r\n            })\r\n        });\r\n    },\r\n\r\n    // register the user\r\n    register({ commit, dispatch, getters }, { email, password } = {}) {\r\n        if (getters.loggedIn) return dispatch('validate')\r\n\r\n        return getFirebaseBackend().registerUser(email, password).then((response) => {\r\n            const user = response\r\n            commit('SET_CURRENT_USER', user)\r\n            return user\r\n        });\r\n    },\r\n\r\n    // register the user\r\n    // eslint-disable-next-line no-unused-vars\r\n    resetPassword({ commit, dispatch, getters }, { email } = {}) {\r\n        if (getters.loggedIn) return dispatch('validate')\r\n\r\n        return getFirebaseBackend().forgetPassword(email).then((response) => {\r\n            const message = response.data\r\n            return message\r\n        });\r\n    },\r\n\r\n    // Validates the current user's token and refreshes it\r\n    // with new data from the API.\r\n    // eslint-disable-next-line no-unused-vars\r\n    validate({ commit, state }) {\r\n        if (!state.currentUser) return Promise.resolve(null)\r\n        const user = getFirebaseBackend().getAuthenticatedUser();\r\n        commit('SET_CURRENT_USER', user)\r\n        return user;\r\n    },\r\n}\r\n\r\n// ===\r\n// Private helpers\r\n// ===\r\n\r\nfunction saveState(key, state) {\r\n    window.localStorage.setItem(key, JSON.stringify(state))\r\n}\r\n"],"mappings":"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"}]}