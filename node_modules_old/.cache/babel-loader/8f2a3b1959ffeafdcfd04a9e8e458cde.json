{"remainingRequest":"D:\\TRABAJO\\Proyectos\\Siouxs\\ancom\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\TRABAJO\\Proyectos\\Siouxs\\ancom\\frontend\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\TRABAJO\\Proyectos\\Siouxs\\ancom\\frontend\\src\\utils\\request.js","dependencies":[{"path":"D:\\TRABAJO\\Proyectos\\Siouxs\\ancom\\frontend\\src\\utils\\request.js","mtime":1665437018322},{"path":"D:\\TRABAJO\\Proyectos\\Siouxs\\ancom\\frontend\\babel.config.js","mtime":1661196671954},{"path":"D:\\TRABAJO\\Proyectos\\Siouxs\\ancom\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1676244686969},{"path":"D:\\TRABAJO\\Proyectos\\Siouxs\\ancom\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1676244696167},{"path":"D:\\TRABAJO\\Proyectos\\Siouxs\\ancom\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1676244690669}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC11aSc7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CgovLyBDcmVhdGUgYXhpb3MgaW5zdGFuY2UKY29uc3Qgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogJ2h0dHBzOi8vanhhcmVuYXMyMTk5MC5weXRob25hbnl3aGVyZS5jb20vYXBpJywKICAvLyBiYXNlVVJMOiAnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2FwaScsCiAgdGltZW91dDogMCAvLyBSZXF1ZXN0IHRpbWVvdXQKfSk7CgovLyBSZXF1ZXN0IGludGVyY2VwdGVyCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGNvbmZpZyA9PiB7CiAgY29uc3QgdG9rZW4gPSBnZXRUb2tlbigpOwogIGlmICh0b2tlbikgewogICAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJyArIGdldFRva2VuKCk7IC8vIFNldCBKV1QgdG9rZW4KICB9CgogIHJldHVybiBjb25maWc7Cn0sIGVycm9yID0+IHsKICAvLyBEbyBzb21ldGhpbmcgd2l0aCByZXF1ZXN0IGVycm9yCiAgY29uc29sZS5sb2coZXJyb3IpOyAvLyBmb3IgZGVidWcKICBjb25zb2xlLmxvZygnZXJyb3IgY29uIGVsIHRva2VuJyk7IC8vIGZvciBkZWJ1ZwogIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CgovLyByZXNwb25zZSBwcmUtcHJvY2Vzc2luZwpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UocmVzcG9uc2UgPT4gewogIGlmIChyZXNwb25zZS5oZWFkZXJzLmF1dGhvcml6YXRpb24pIHsKICAgIHNldFRva2VuKHJlc3BvbnNlLmhlYWRlcnMuYXV0aG9yaXphdGlvbik7CiAgICByZXNwb25zZS5kYXRhLnRva2VuID0gcmVzcG9uc2UuaGVhZGVycy5hdXRob3JpemF0aW9uOwogIH0KICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKfSwgZXJyb3IgPT4gewogIGxldCBtZXNzYWdlID0gJ0hhIGZhbGxhZG8gbGEgcGV0aWNpw7NuIGFsIHNlcnZpZG9yLCBpbnRlbnRlIG51ZXZhbWVudGUuJzsKICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgIGxldCBtZW5zYWplID0gJ1N1IHNlc2nDs24gaGEgZXhwaXJhZG8uLi4gcG9yIGZhdm9yLCB2dWVsdmEgYSBpbmljaWFyIHNlc2nDs24gcGFyYSBjb250aW51YXIuJzsKICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKSB7CiAgICAgIG1lbnNhamUgPSBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yOwogICAgfQogICAgTWVzc2FnZSh7CiAgICAgIG1lc3NhZ2U6IG1lbnNhamUsCiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIGR1cmF0aW9uOiA1ICogMTAwMAogICAgfSk7CiAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0KICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHsKICAgIE1lc3NhZ2UoewogICAgICBtZXNzYWdlOiAnSGEgZXhwaXJhZG8gZWwgdGllbXBvIGRlIHN1IHNlc2lvbiwgZGViZSBhdXRlbnRpY2Fyc2UgbnVldmFtZW50ZS4nLAogICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgIGR1cmF0aW9uOiA1ICogMTAwMAogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0KICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MjIpIHsKICAgIC8vIHZhbGlkYWNpb25lcwogICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZGF0YSAmJiBlcnJvci5yZXNwb25zZS5kYXRhLmRhdGEudmFsaWRhdGlvbikgewogICAgICBjb25zdCBtZW5zYWplcyA9IFtdOwogICAgICBmb3IgKGNvbnN0IG1lbnNhamUgb2YgZXJyb3IucmVzcG9uc2UuZGF0YS5kYXRhLnZhbGlkYXRpb24pIHsKICAgICAgICBtZW5zYWplcy5wdXNoKG1lbnNhamUpOwogICAgICB9CiAgICAgIE1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6IG1lbnNhamVzWzBdLAogICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgZHVyYXRpb246IDUgKiAxMDAwCiAgICAgIH0pOwogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgfQogICAgbGV0IG1lc3NhZ2UgPSAnQ29tcHJ1ZWJlIGxvcyBkYXRvcyc7CiAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YSAmJiBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yKSB7CiAgICAgIG1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yOwogICAgfQogICAgLy8KICAgIC8vIGlmIChlcnJvci5yZXNwb25zZS5kYXRhICYmIGVycm9yLnJlc3BvbnNlLmRhdGEuZGF0YS5lcnJvcmVzKSB7CiAgICAvLyAgIG1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZS5kYXRhLmRhdGEuZXJyb3JlczsKICAgIC8vIH0KICAgIE1lc3NhZ2UoewogICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgIGR1cmF0aW9uOiA1ICogMTAwMAogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0KICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5zdWNjZXNzID09PSBmYWxzZSkgewogICAgbWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEubXNnOyAvLyBlbiBjYXNvIGRlIHF1ZSBvY3VycmEgdW4gZXJyb3IgY29uIHVuIHJlY3Vyc28uCiAgICBjb25zb2xlLmxvZygnZXJyb3IgY29uIGVsIHJlY3Vyc28nKTsKICAgIGNvbnNvbGUubG9nKGVycm9yKTsKCiAgICAvLyByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0KCiAgTWVzc2FnZSh7CiAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgdHlwZTogJ2Vycm9yJywKICAgIGR1cmF0aW9uOiA1ICogMTAwMAogIH0pOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCBzZXJ2aWNlOw=="},{"version":3,"names":["axios","router","Message","getToken","setToken","service","create","baseURL","timeout","interceptors","request","use","config","token","headers","error","console","log","Promise","reject","response","authorization","data","message","status","mensaje","type","duration","push","validation","mensajes","success","msg"],"sources":["D:/TRABAJO/Proyectos/Siouxs/ancom/frontend/src/utils/request.js"],"sourcesContent":["import axios from 'axios';\r\nimport router from '@/router';\r\nimport { Message } from 'element-ui';\r\nimport { getToken, setToken } from '@/utils/auth';\r\n\r\n// Create axios instance\r\nconst service = axios.create({\r\n  baseURL: 'https://jxarenas21990.pythonanywhere.com/api',\r\n  // baseURL: 'http://127.0.0.1:5000/api',\r\n  timeout: 0, // Request timeout\r\n});\r\n\r\n// Request intercepter\r\nservice.interceptors.request.use(\r\n  config => {\r\n    const token = getToken();\r\n    if (token) {\r\n      config.headers['Authorization'] = 'Bearer ' + getToken(); // Set JWT token\r\n    }\r\n\r\n    return config;\r\n  },\r\n  error => {\r\n    // Do something with request error\r\n    console.log(error); // for debug\r\n    console.log('error con el token'); // for debug\r\n    Promise.reject(error);\r\n  }\r\n);\r\n\r\n// response pre-processing\r\nservice.interceptors.response.use(\r\n  response => {\r\n    if (response.headers.authorization) {\r\n      setToken(response.headers.authorization);\r\n      response.data.token = response.headers.authorization;\r\n    }\r\n\r\n    return response.data;\r\n  },\r\n  (error) => {\r\n    let message = 'Ha fallado la petición al servidor, intente nuevamente.';\r\n\r\n    if (error.response.status === 401) {\r\n      let mensaje = 'Su sesión ha expirado... por favor, vuelva a iniciar sesión para continuar.';\r\n      if (error.response.data.error) {\r\n        mensaje = error.response.data.error;\r\n      }\r\n      Message({\r\n        message: mensaje,\r\n        type: 'error',\r\n        duration: 5 * 1000,\r\n      });\r\n      router.push('/login');\r\n      return Promise.reject(error);\r\n    }\r\n    if (error.response.status === 403) {\r\n      Message({\r\n        message: 'Ha expirado el tiempo de su sesion, debe autenticarse nuevamente.',\r\n        type: 'warning',\r\n        duration: 5 * 1000,\r\n      });\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    if (error.response.status === 422) { // validaciones\r\n      if (error.response.data.data && error.response.data.data.validation) {\r\n        const mensajes = [];\r\n        for (const mensaje of error.response.data.data.validation) {\r\n          mensajes.push(mensaje);\r\n        }\r\n        Message({\r\n          message: mensajes[0],\r\n          type: 'error',\r\n          duration: 5 * 1000,\r\n        });\r\n\r\n        return Promise.reject(error);\r\n      }\r\n      let message = 'Compruebe los datos';\r\n      if (error.response.data && error.response.data.error) {\r\n        message = error.response.data.error;\r\n      }\r\n      //\r\n      // if (error.response.data && error.response.data.data.errores) {\r\n      //   message = error.response.data.data.errores;\r\n      // }\r\n      Message({\r\n        message: message,\r\n        type: 'warning',\r\n        duration: 5 * 1000,\r\n      });\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    if (error.response.data.success === false) {\r\n      message = error.response.data.msg; // en caso de que ocurra un error con un recurso.\r\n      console.log('error con el recurso');\r\n      console.log(error);\r\n\r\n      // return Promise.reject(error);\r\n    }\r\n\r\n    Message({\r\n      message: message,\r\n      type: 'error',\r\n      duration: 5 * 1000,\r\n    });\r\n    return Promise.reject(error);\r\n  },\r\n);\r\n\r\nexport default service;\r\n"],"mappings":"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"}]}